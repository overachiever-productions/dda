
ALTER PROCEDURE [json].[test array_is_array]
AS
BEGIN
  	-----------------------------------------------------------------------------------------------------------------
	-- Arrange:
	-----------------------------------------------------------------------------------------------------------------
	DECLARE @dataType tinyint;
	DECLARE @jsonArray nvarchar(MAX) = N'[
		{
		"OrderNumber":"SO43659",
		"OrderDate":"2011-05-31T00:00:00",
		"AccountNumber":"AW29825",
		"ItemPrice":2024.9940,
		"ItemQuantity":1
		},
		{
		"OrderNumber":"SO43661",
		"OrderDate":"2011-06-01T00:00:00",
		"AccountNumber":"AW73565",
		"ItemPrice":2024.9940,
		"ItemQuantity":3
		}
		]';

	-----------------------------------------------------------------------------------------------------------------
	-- Act: 
	-----------------------------------------------------------------------------------------------------------------
	SELECT @dataType = dda.[get_json_data_type](@jsonArray);

	-----------------------------------------------------------------------------------------------------------------
	-- Assert: 
	-----------------------------------------------------------------------------------------------------------------
	EXEC [tSQLt].[AssertEquals] @Expected = 4, @Actual = @dataType;

END;
